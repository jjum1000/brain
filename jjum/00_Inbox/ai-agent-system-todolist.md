# AI 에이전트 중심 지식 관리 시스템 - 구현 TodoList

## 📋 프로젝트 개요
- **목표**: 완전 자동화된 AI 에이전트 기반 지식 관리 시스템 구축
- **작업자**: AI 에이전트 (Claude Code, Claude API)
- **핵심 원칙**: 세션 독립성, 완전 자동화, 멱등성 보장

---

## 🎯 Phase 1: 핵심 인프라 구축 (우선순위: 최상)

### 1.1 상태 추적 시스템 구현
- [ ] **디렉토리 구조 생성**
  - [ ] `.obsidian/state/` 디렉토리 생성
  - [ ] `.obsidian/scripts/` 디렉토리 생성
  - [ ] `.obsidian/scripts/agent-modules/` 디렉토리 생성

- [ ] **Work Queue 시스템**
  - [ ] `work-queue.json` 스키마 정의
  - [ ] `queue-manager.js` 구현
    - [ ] `addToQueue()` - 새 작업 추가
    - [ ] `getNext()` - 다음 작업 가져오기
    - [ ] `startProcessing()` - 작업 시작 처리
    - [ ] `detectType()` - 파일 타입 감지
    - [ ] `calculatePriority()` - 우선순위 계산
    - [ ] `determineAgents()` - 필요한 에이전트 결정
    - [ ] `calculateHash()` - 파일 해시 계산
  - [ ] Work Queue 초기 데이터 구조 생성

- [ ] **Processing Manifest 시스템**
  - [ ] `processing-manifest.json` 스키마 정의
  - [ ] `processing-manifest.js` 구현
    - [ ] `add()` - 새 처리 항목 추가
    - [ ] `updateAgent()` - 에이전트 상태 업데이트
    - [ ] `isComplete()` - 완료 여부 확인
    - [ ] `complete()` - 완료 처리
    - [ ] `getInProgress()` - 진행 중인 작업 조회
  - [ ] Processing Manifest 초기 데이터 구조 생성

- [ ] **Completion Log 시스템**
  - [ ] `completion-log.json` 스키마 정의
  - [ ] `completion-log.js` 구현
    - [ ] `add()` - 완료 기록 추가
    - [ ] `query()` - 이력 조회
    - [ ] `getStatistics()` - 통계 생성
    - [ ] `cleanup()` - 오래된 로그 정리
  - [ ] Completion Log 초기 데이터 구조 생성

### 1.2 Resource Registry 구현
- [ ] **Registry 구조 설계**
  - [ ] `resource-registry.json` 스키마 정의
  - [ ] Registry 카테고리 정의
    - [ ] `glossaries` - 용어집 경로
    - [ ] `configs` - 설정 파일 경로
    - [ ] `templates` - 템플릿 경로
    - [ ] `filing_rules` - 파일링 규칙 경로
    - [ ] `indexes` - 인덱스 경로

- [ ] **Registry Manager 구현**
  - [ ] `resource-registry.js` 구현
    - [ ] `get()` - 리소스 조회
    - [ ] `add()` - 리소스 등록
    - [ ] `update()` - 리소스 업데이트
    - [ ] `validate()` - 경로 유효성 검증
  - [ ] 초기 Registry 데이터 생성

---

## 🤖 Phase 2: 에이전트 시스템 구현 (우선순위: 상)

### 2.1 Base Agent 프레임워크
- [ ] **BaseAgent 클래스 구현**
  - [ ] `base-agent.js` 생성
  - [ ] 표준 인터페이스 정의
    - [ ] `execute()` - 메인 실행 메서드
    - [ ] `process()` - 처리 로직 (추상 메서드)
    - [ ] `loadRegistry()` - Resource Registry 로드
    - [ ] `saveDocument()` - 문서 저장 유틸리티
    - [ ] `validateInput()` - 입력 검증
    - [ ] `handleError()` - 에러 처리
  - [ ] 에이전트 생명주기 메서드
    - [ ] `beforeProcess()` - 전처리
    - [ ] `afterProcess()` - 후처리
  - [ ] 로깅 및 상태 업데이트 로직

### 2.2 개별 에이전트 구현

#### 2.2.1 Normalization Agent
- [ ] **`normalization-agent.js` 구현**
  - [ ] HTML 태그 제거
  - [ ] 특수 문자 정리
  - [ ] Frontmatter 생성/업데이트
    - [ ] title 설정
    - [ ] created_at 추가
    - [ ] status: "normalized" 설정
  - [ ] 줄바꿈 표준화
  - [ ] 인코딩 통일 (UTF-8)
  - [ ] 테스트 케이스 작성

#### 2.2.2 Keyword Extraction Agent
- [ ] **`keyword-extraction-agent.js` 구현**
  - [ ] NLP 라이브러리 선택 및 설치
  - [ ] 키워드 추출 알고리즘 구현
    - [ ] TF-IDF 기반 추출
    - [ ] 빈도 기반 필터링
    - [ ] 불용어 제거
  - [ ] Frontmatter 업데이트
    - [ ] keywords 배열 추가
    - [ ] concepts 배열 추가
  - [ ] 추출 품질 임계값 설정
  - [ ] 테스트 케이스 작성

#### 2.2.3 Linking Agent
- [ ] **`linking-agent.js` 구현**
  - [ ] Glossary Index 로드
  - [ ] 용어 매칭 알고리즘 구현
    - [ ] 정확한 매칭
    - [ ] 유사도 기반 매칭
  - [ ] 위키링크 생성
    - [ ] [[용어]] 형식 삽입
    - [ ] 중복 링크 방지
  - [ ] 링크 우선순위 결정
  - [ ] Frontmatter 업데이트
    - [ ] linked_concepts 추가
  - [ ] 테스트 케이스 작성

#### 2.2.4 Tagging Agent
- [ ] **`tagging-agent.js` 구현**
  - [ ] 태그 규칙 로드 (Resource Registry)
  - [ ] 자동 태깅 로직 구현
    - [ ] 키워드 기반 태깅
    - [ ] 경로 기반 태깅
    - [ ] 컨텍스트 기반 태깅
  - [ ] Frontmatter 업데이트
    - [ ] tags 배열 추가
  - [ ] 태그 정규화
  - [ ] 테스트 케이스 작성

#### 2.2.5 Filing Agent
- [ ] **`filing-agent.js` 구현**
  - [ ] Filing Rules 로드
  - [ ] 목적지 경로 결정 로직
    - [ ] 태그 기반 분류
    - [ ] 키워드 기반 분류
    - [ ] 소스 타입 기반 분류
  - [ ] 파일 이동 구현
    - [ ] 안전한 파일 이동
    - [ ] 중복 처리
    - [ ] 백업 생성
  - [ ] Frontmatter 업데이트
    - [ ] moved_at 추가
    - [ ] final_location 추가
  - [ ] 테스트 케이스 작성

---

## 🔄 Phase 3: 파이프라인 및 오케스트레이션 (우선순위: 상)

### 3.1 메인 프로세서 구현
- [ ] **`main-processor.js` 생성**
  - [ ] Work Queue 확인 로직
  - [ ] 작업 우선순위 처리
  - [ ] 에이전트 파이프라인 실행
    - [ ] 순차 실행 로직
    - [ ] 에이전트 간 데이터 전달
    - [ ] 상태 업데이트 (Processing Manifest)
  - [ ] 에러 처리 및 복구
    - [ ] try-catch 래퍼
    - [ ] 재시도 로직
    - [ ] 부분 실패 처리
  - [ ] 완료 처리
    - [ ] Completion Log 기록
    - [ ] 정리 작업

### 3.2 배치 프로세서 구현
- [ ] **`batch-processor.js` 생성**
  - [ ] 전체 큐 처리 로직
  - [ ] 병렬 처리 옵션
  - [ ] 진행 상태 로깅
  - [ ] 배치 완료 리포트 생성

### 3.3 복구 메커니즘
- [ ] **`recovery-processor.js` 생성**
  - [ ] 실패한 작업 감지
  - [ ] 마지막 성공 지점 확인
  - [ ] 재개 로직 구현
  - [ ] 무한 재시도 방지

---

## 📚 Phase 4: 지원 시스템 구축 (우선순위: 중)

### 4.1 Glossary Index 시스템
- [ ] **인덱스 빌더 구현**
  - [ ] `glossary-builder.js` 생성
  - [ ] 용어집 파일 스캔
  - [ ] 인덱스 생성 로직
    - [ ] 용어 → 파일 경로 매핑
    - [ ] 동의어 처리
    - [ ] 우선순위 설정
  - [ ] `glossary-index.json` 생성
  - [ ] 인덱스 업데이트 스케줄러

### 4.2 Filing Rules 시스템
- [ ] **규칙 정의 파일 생성**
  - [ ] `filing-rules.json` 스키마 정의
  - [ ] 규칙 카테고리 정의
    - [ ] 태그 기반 규칙
    - [ ] 키워드 기반 규칙
    - [ ] 소스 타입 규칙
  - [ ] 기본 규칙 세트 작성
  - [ ] 규칙 우선순위 정의

- [ ] **Filing Rules Engine 구현**
  - [ ] `filing-rules-engine.js` 생성
  - [ ] 규칙 매칭 로직
  - [ ] 목적지 경로 결정 알고리즘
  - [ ] 충돌 해결 로직

### 4.3 파일 감시자 (File Watcher)
- [ ] **파일 감시 시스템 구현**
  - [ ] `file-watcher.js` 생성
  - [ ] `00_Inbox/` 디렉토리 모니터링
  - [ ] 새 파일 감지
  - [ ] Work Queue 자동 추가
  - [ ] 파일 메타데이터 수집
  - [ ] Obsidian 플러그인 통합 (선택사항)

---

## 🔌 Phase 5: 통합 및 트리거 시스템 (우선순위: 중)

### 5.1 Git Integration
- [ ] **Git Hook 설정**
  - [ ] `post-commit` hook 스크립트 작성
  - [ ] 커밋 정보 수집
    - [ ] commit hash
    - [ ] commit message
    - [ ] changed files
  - [ ] Work Queue에 자동 추가
  - [ ] Hook 설치 스크립트

### 5.2 CLI 인터페이스
- [ ] **CLI 도구 구현**
  - [ ] `cli.js` 생성
  - [ ] 명령어 정의
    - [ ] `process-next` - 다음 작업 처리
    - [ ] `process-all` - 전체 큐 처리
    - [ ] `retry-failed` - 실패 작업 재시도
    - [ ] `status` - 현재 상태 확인
    - [ ] `clean` - 로그 정리
  - [ ] 도움말 메시지
  - [ ] 실행 가능 파일로 설정

### 5.3 스케줄러 (선택사항)
- [ ] **주기적 실행 설정**
  - [ ] Cron 작업 설정
  - [ ] 배치 처리 스케줄
  - [ ] 인덱스 재빌드 스케줄
  - [ ] 로그 정리 스케줄

---

## 🧪 Phase 6: 테스트 및 검증 (우선순위: 중)

### 6.1 유닛 테스트
- [ ] **테스트 프레임워크 설정**
  - [ ] Jest 또는 Mocha 설치
  - [ ] 테스트 디렉토리 구조 생성

- [ ] **각 모듈별 테스트 작성**
  - [ ] Work Queue Manager 테스트
  - [ ] Processing Manifest 테스트
  - [ ] Completion Log 테스트
  - [ ] 각 에이전트 테스트
  - [ ] Filing Rules Engine 테스트
  - [ ] Glossary Builder 테스트

### 6.2 통합 테스트
- [ ] **End-to-End 테스트**
  - [ ] 전체 파이프라인 테스트
  - [ ] 에러 복구 시나리오 테스트
  - [ ] 동시성 테스트
  - [ ] 성능 테스트

### 6.3 시뮬레이션 테스트
- [ ] **테스트 데이터 생성**
  - [ ] 샘플 문서 세트
  - [ ] 다양한 소스 타입 시뮬레이션
  - [ ] 에지 케이스 문서

- [ ] **시뮬레이션 실행**
  - [ ] 정상 시나리오
  - [ ] 실패 시나리오
  - [ ] 복구 시나리오

---

## 🛡️ Phase 7: 안정성 및 최적화 (우선순위: 하)

### 7.1 동시성 제어
- [ ] **파일 잠금 메커니즘**
  - [ ] Lock 파일 시스템 구현
  - [ ] 동시 실행 방지
  - [ ] Deadlock 방지

### 7.2 에러 처리 강화
- [ ] **포괄적 에러 처리**
  - [ ] 모든 에이전트에 try-catch 추가
  - [ ] 에러 분류 체계
  - [ ] 에러 로깅 표준화
  - [ ] 알림 시스템 (선택사항)

### 7.3 성능 최적화
- [ ] **병목 지점 분석**
  - [ ] 프로파일링 도구 적용
  - [ ] 느린 작업 식별

- [ ] **최적화 구현**
  - [ ] 캐싱 시스템
  - [ ] 병렬 처리 구현
  - [ ] 인덱스 최적화
  - [ ] 파일 I/O 최적화

### 7.4 로그 관리
- [ ] **로그 시스템 구현**
  - [ ] 구조화된 로깅
  - [ ] 로그 레벨 설정
  - [ ] 로그 로테이션
  - [ ] 로그 분석 도구

---

## 📖 Phase 8: 문서화 (우선순위: 하)

### 8.1 개발 문서
- [ ] **시스템 아키텍처 문서**
  - [ ] 전체 구조도
  - [ ] 데이터 플로우 다이어그램
  - [ ] 상태 전이 다이어그램

- [ ] **API 문서**
  - [ ] 각 모듈 인터페이스 문서
  - [ ] 함수 시그니처 및 설명
  - [ ] 사용 예제

### 8.2 운영 가이드
- [ ] **설치 가이드**
  - [ ] 의존성 설치
  - [ ] 초기 설정
  - [ ] 환경 변수 설정

- [ ] **운영 매뉴얼**
  - [ ] 일상 운영 절차
  - [ ] 문제 해결 가이드
  - [ ] 성능 모니터링

### 8.3 에이전트 개발 가이드
- [ ] **새 에이전트 추가 가이드**
  - [ ] BaseAgent 상속 방법
  - [ ] 표준 인터페이스 구현
  - [ ] 테스트 작성 가이드
  - [ ] 예제 에이전트

---

## 🚀 Phase 9: 배포 및 초기 실행 (우선순위: 하)

### 9.1 프로덕션 준비
- [ ] **환경 설정**
  - [ ] 프로덕션 설정 파일
  - [ ] 로깅 레벨 조정
  - [ ] 성능 튜닝

- [ ] **보안 검토**
  - [ ] 파일 권한 확인
  - [ ] 민감 데이터 처리
  - [ ] 의존성 보안 감사

### 9.2 초기 데이터 마이그레이션
- [ ] **기존 문서 처리**
  - [ ] 기존 Inbox 문서 스캔
  - [ ] Work Queue에 일괄 추가
  - [ ] 배치 처리 실행
  - [ ] 결과 검증

### 9.3 모니터링 설정
- [ ] **모니터링 시스템**
  - [ ] 실행 메트릭 수집
  - [ ] 에러율 모니터링
  - [ ] 성능 메트릭
  - [ ] 대시보드 (선택사항)

---

## 🔧 Phase 10: 유지보수 및 개선 (지속적)

### 10.1 정기 점검
- [ ] **주간 점검 항목**
  - [ ] Completion Log 검토
  - [ ] 에러 로그 분석
  - [ ] 성능 메트릭 확인

- [ ] **월간 점검 항목**
  - [ ] 로그 정리
  - [ ] 인덱스 재빌드
  - [ ] 규칙 업데이트 검토

### 10.2 기능 개선
- [ ] **개선 백로그**
  - [ ] 사용자 피드백 수집
  - [ ] 새로운 에이전트 아이디어
  - [ ] 성능 개선 아이디어
  - [ ] 규칙 최적화

### 10.3 버전 관리
- [ ] **릴리스 관리**
  - [ ] 변경 로그 작성
  - [ ] 버전 태깅
  - [ ] 백업 및 롤백 계획

---

## 📊 진행 상황 추적

### 전체 진행률
```
Phase 1: [ ] 0%  - 핵심 인프라 구축
Phase 2: [ ] 0%  - 에이전트 시스템 구현
Phase 3: [ ] 0%  - 파이프라인 및 오케스트레이션
Phase 4: [ ] 0%  - 지원 시스템 구축
Phase 5: [ ] 0%  - 통합 및 트리거 시스템
Phase 6: [ ] 0%  - 테스트 및 검증
Phase 7: [ ] 0%  - 안정성 및 최적화
Phase 8: [ ] 0%  - 문서화
Phase 9: [ ] 0%  - 배포 및 초기 실행
Phase 10: [ ] 0% - 유지보수 및 개선

전체: [ ] 0%
```

### 우선순위별 작업
- **🔴 최상 (Phase 1)**: 세션 독립성의 핵심
- **🟠 상 (Phase 2-3)**: 자동화의 핵심
- **🟡 중 (Phase 4-6)**: 실용성 향상
- **🟢 하 (Phase 7-9)**: 완성도 향상
- **🔵 지속적 (Phase 10)**: 운영 및 개선

---

## 💡 구현 팁

### 개발 순서 권장사항
1. **Phase 1 완료 → 기본 상태 추적 시스템 작동 확인**
2. **Phase 2의 한 에이전트 완성 → End-to-End 테스트**
3. **나머지 에이전트 순차 추가**
4. **Phase 3 통합 → 전체 파이프라인 작동 확인**
5. **Phase 4-5 추가 → 실용성 향상**
6. **Phase 6 테스트 → 안정성 확보**

### 주의사항
- ✅ 각 Phase의 작업은 독립적으로 테스트 가능해야 함
- ✅ 상태 파일(JSON)은 항상 백업 후 수정
- ✅ 에이전트는 멱등성을 보장해야 함
- ✅ 파일 경로는 절대 경로로 관리
- ⚠️ 동시 실행 시 파일 충돌 주의
- ⚠️ 큰 파일 처리 시 메모리 사용량 모니터링

---

## 🎯 완료 기준

### Phase별 완료 조건
- **Phase 1**: 3개 상태 파일 시스템이 정상 작동
- **Phase 2**: 최소 1개 에이전트가 독립적으로 실행 가능
- **Phase 3**: 전체 파이프라인이 한 문서를 처리 완료
- **Phase 4**: Glossary Index와 Filing Rules가 작동
- **Phase 5**: Git hook 또는 CLI로 자동 실행 가능
- **Phase 6**: 모든 유닛 테스트 통과
- **Phase 7**: 24시간 연속 실행 안정성 확인
- **Phase 8**: 문서가 완성되어 새 개발자가 이해 가능
- **Phase 9**: 프로덕션 환경에서 정상 작동
- **Phase 10**: 정기 점검 루틴 확립

### 프로젝트 완료 조건
✅ 모든 Phase 1-9 완료  
✅ 통합 테스트 100% 통과  
✅ 문서화 완료  
✅ 최소 1주일 안정적 운영  
✅ 에러율 < 1%  
✅ 평균 처리 시간 < 30초/문서  

---

**마지막 업데이트**: 2025-10-21  
**상태**: 계획 단계  
**다음 작업**: Phase 1.1 착수
